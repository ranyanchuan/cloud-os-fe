webpackJsonp([4],{1816:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,i,l,c,f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(0),p=n(d),h=r(20),m=r(1),g=n(m),b=r(5),v=r(178),A=r(26),y=r(34),E=n(y),I=r(765),w=n(I),B=r(96),S=n(B),O=r(367),U=n(O),k=r(2052),M=r(2053),P=n(M),C=r(2054),x=n(C),R=E.default.requestStart,q=E.default.requestSuccess,j=E.default.requestError,z=w.default.getUserInfo,T=(u=(0,h.connect)((0,b.mapStateToProps)("userInfo",{key:"currItem",value:function(e,t,r){return r.wrap.currItem}},{namespace:"homepage"}),{requestStart:R,requestSuccess:q,requestError:j,getUserInfo:z}))((c=l=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.getUrl=function(e){var t=window.getHostForGlobal("portal"),n="";return n="info"===e?t+"/static/home.html#/myspeech/personInfo?target=pc":"speak"===e?t+"/static/home.html#/myspeech/index?index=0&target=pc":(0,b.getHost)("honor")+"/pc/modules/honorZone/ph/index.html",r.urlPack(n)},r.resizeFrame=function(){r.setState({style:{height:window.innerHeight-r.headerHeight}})},r.forbidBack=function(){history.pushState(null,null,document.URL)},r.urlPack=function(e){return e.indexOf("?")>-1?e+"&":e+"?"},r.getUserInfo=function(e){var t=r.props,n=t.getUserInfo,a=t.requestStart,o=t.requestSuccess,s=t.requestError,u=(0,b.getContext)(),i=u.userid;r.setState({isSelf:!(e!==i)}),r.isRe=!0,a(),n(e).then(function(e){var t=e.error,n=e.payload;if(t)return s(n),!1;o(),r.isRe=!1})},r.TabsClick=function(e){var t=r.props.userInfo.userId;if(r.state.activetab===e)return!1;var n=r.getUrl(e);r.setState({activetab:e,iframeUrl:n},function(){(0,A.openWin)({id:"HomePage",title:"主頁",data:{userId:t,key:e}})})},r.sendMessage=function(){var e=r.props.userInfo.userId;(0,v.trigger)("IM","switchChatTo",{yht_id:e})},r.sendEmail=function(){(0,A.openService)("XTWEIYOU0000000000")},r.sendHonor=function(){var e=r.props.userInfo.userId,t=(0,b.getHost)("honor")+"/pc/modules/honorZone/send/index.html";(0,A.dispatchMessageTypeHandler)({type:"openFrame",detail:{id:"honor",url:t,backdrop:!0,pageParam:{name:"malong",userId:e}}})},r.renderTabs=function(){var e=[{key:"info",label:"資料"}],t=r.state.activetab,n=r.props.userInfo,a=n.openHonour,o=n.openMoments,s=(0,b.getContext)(),u=s.productLine;return o&&e.push({key:"speak",label:"發言"}),"u8c"!==u&&a&&e.push({key:"honor",label:"榮耀"}),e.map(function(e){return p.default.createElement("li",{key:e.key,onClick:function(){r.TabsClick(e.key)},className:e.key===t?k.active:""},e.label)})},r.headerHeight=118,r.state={isSelf:!1,activetab:"info",iframeUrl:"",style:{height:window.innerHeight-r.headerHeight}},r.brm=[{name:"個人主頁"}],r.isRe=!1,r.historys=[],r.storageArr=[],r}return s(t,e),f(t,[{key:"componentWillMount",value:function(){var e=this.props.currItem.data,t=e.key,r=e.userId,n=this.getUrl(t);this.setState({activetab:t,iframeUrl:n}),this.getUserInfo(r),this.storageArr.push(r)}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.forbidBack),window.addEventListener("resize",this.resizeFrame,!1)}},{key:"componentWillReceiveProps",value:function(e){if("HomePage"===e.currItem.id){var t=e.currItem.data?e.currItem.data.userId:"",r=this.props.userInfo.userId;r&&t&&t!==r&&!this.isRe&&(this.getUserInfo(t),this.storageArr.includes(t)||(this.historys.push(r),this.storageArr.push(t)));var n=e.currItem.data?e.currItem.data.key:"",a=this.state.activetab;if(a&&n&&n!==a){var o=this.getUrl(n);this.setState({activetab:n,iframeUrl:o})}}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.forbidBack)}},{key:"render",value:function(){var e=this.state,t=e.activetab,r=e.iframeUrl,n=e.style,a=(0,b.getContext)(),o=a.productLine,s=window.getUserInfo(),u=s.openHonour,i=this.props.userInfo,l=i.userAvator,c=i.userName,f=i.company,d=i.userId;return d?p.default.createElement("div",{className:"diworkcontent",id:"HomePage"},p.default.createElement("div",{className:""+k.content},p.default.createElement("div",{className:k.user,id:"user"},p.default.createElement("img",{src:P.default}),p.default.createElement("div",{className:k.info},p.default.createElement("dl",{className:"clearfix"},p.default.createElement("dt",null,p.default.createElement("img",{src:l||x.default})),p.default.createElement("dd",null,p.default.createElement("h5",null,c),p.default.createElement("h6",null,f),this.state.isSelf?null:p.default.createElement("div",null,p.default.createElement(S.default,{onClick:this.sendMessage},"發消息"),p.default.createElement(S.default,{onClick:this.sendEmail},"發郵件"),"u8c"!==o&&u?p.default.createElement(S.default,{onClick:this.sendHonor},"發榮耀"):null))))),p.default.createElement("div",{className:""+k.tabContent},p.default.createElement("ul",null,this.renderTabs()),p.default.createElement("div",{style:Object.assign(n,{position:"relative"})},p.default.createElement(U.default,{id:"HomePage",title:t,url:r+"userId="+d}))))):null}}]),t}(d.Component),l.propTypes={requestStart:g.default.func,requestSuccess:g.default.func,requestError:g.default.func,getUserInfo:g.default.func,history:g.default.shape({go:g.default.func,push:g.default.func,replace:g.default.func}),location:g.default.shape({pathname:g.default.string}),routes:g.default.arrayOf(g.default.object),userInfo:g.default.shape({userAvator:g.default.string,name:g.default.string}),match:g.default.shape({})},l.defaultProps={requestStart:function(){},requestSuccess:function(){},requestError:function(){},getUserInfo:function(){},history:{},location:{},routes:[],userInfo:{userAvator:"",userName:""},match:{}},i=c))||i;t.default=T},2052:function(e,t){e.exports={umContent:"umContent--21Rk-",content:"content--1c766",user:"user--S1xoz",info:"info--17tp8",tabContent:"tabContent--2bGwR",active:"active--3OYek"}},2053:function(e,t,r){e.exports=r.p+"img/homepage-b83cfded.png"},2054:function(e,t){e.exports="data:image/png;base64,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"}});
//# sourceMappingURL=HomePage-4.js.map